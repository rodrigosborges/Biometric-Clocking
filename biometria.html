<h1>Relógio de ponto</h1>
<br>
<h3 id="funcionario">-</h3>
<button class="btn btn-primary bottom-right navegar" data-href="funcionarios">Funcionários</button>

<script>
            
    $(document).ready(function(){
        requestIdentify()
    })
    
    function dataFormatada() {
        var data = new Date(),
            dia = data.getDate() < 10 ? "0"+data.getDate() : data.getDate(),
            mes = data.getMonth() < 9 ? "0"+(data.getMonth()+1) : data.getMonth()+1,
            ano = data.getFullYear(),
            hora = data.getHours() < 10 ? "0"+data.getHours() : data.getHours(),
            minutos = data.getMinutes() < 10 ? "0"+data.getMinutes() : data.getMinutes(),
            segundos = data.getSeconds() < 10 ? "0"+data.getSeconds() : data.getSeconds();
        return [dia, mes, ano].join('/') + ' ' + [hora, minutos, segundos].join(':');
    }

    function requestIdentify(){
        request = $.ajax({
            'url': 'http://192.168.2.104:4444/api/start',
            'timeout': 0,
        }).done(function( data ) {
            $("#funcionario").html(`${data.nome} - ${dataFormatada()}`)
            requestIdentify()
        }).fail(function() {
            setTimeout(() => requestIdentify(), 5000)
        })
    }

</script>